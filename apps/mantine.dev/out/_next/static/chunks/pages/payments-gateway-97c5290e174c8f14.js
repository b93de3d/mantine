(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71600],{64373:(e,n,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/payments-gateway",function(){return s(82877)}])},82877:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>c});var t=s(31085),i=s(71184);s(73752),s(87894);var r=s(85954),o=s(38215);let a=(0,r.P)(o.XZ.PaymentsGateway);function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{IntegratedProviders:s,IntegrationSteps:r,KeyFeatures:o}=n;return s||h("IntegratedProviders",!0),r||h("IntegrationSteps",!0),o||h("KeyFeatures",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"payments-gateway",children:"Payments Gateway"}),"\n",(0,t.jsx)(n.h2,{id:"feature-overview",children:"Feature overview"}),"\n",(0,t.jsx)(o,{}),"\n",(0,t.jsx)(n.h2,{id:"providers",children:"Providers"}),"\n",(0,t.jsx)(n.p,{children:"Here are just a few of the payment providers we currently have integrated:"}),"\n",(0,t.jsx)(s,{}),"\n",(0,t.jsx)(n.p,{children:"Additional providers can also be integrated rapidly where needed."}),"\n",(0,t.jsx)(n.h2,{id:"integration-overview",children:"Integration Overview"}),"\n",(0,t.jsx)(r,{}),"\n",(0,t.jsx)(n.h2,{id:"create-a-payment-session",children:"Create a payment session"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"You will need"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"An API Key"}),"\n",(0,t.jsxs)(n.li,{children:["The URL of your BookieBase instance (",(0,t.jsx)(n.a,{href:"https://staging.bookiebase.ie/api/",children:"https://staging.bookiebase.ie/api/"})," for staging)"]}),"\n",(0,t.jsx)(n.li,{children:"In production, you will need to ask us to whitelist your IP addresses from which API requests can be made."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Create a new payment session via a ",(0,t.jsx)(n.code,{children:"POST"})," request to the ",(0,t.jsx)(n.code,{children:"/payment_sessions"})," endpoint:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Python Example\n\nimport requests\n\nres = requests.post(\n    "https://staging.bookiebase.ie/api/payment_sessions",\n    headers={"Authorization": "Token [YOUR_API_KEY]"},\n    json={\n        "customer": {\n            "unique_id": "123",         # Unique customer identifier\n            "first_name": "John",\n            "last_name": "Jones",\n        },\n        "payment": {\n            "unique_id": "P-0001",      # Your unique identifier for the session\n            "payment_type": "DEPOSIT",  # DEPOSIT or WITHDRAWAL\n            "amount_cents": "1000",     # \xa310\n            "currency": "GBP",\n        },\n        "session_config": {\n            "success_redirect_url": "https://yoursite.com/payment/result",\n            "failure_redirect_url": "https://yoursite.com/payment/result",\n            "webhook_url": "https://api.yoursite.com/webhooks",\n        },\n    },\n)\n\nresult = res.json()     # { "payment_session": { "url": "https://staging.bookiebase.ie/payment/[PAYMENT_SESSION_UUID]" } }\n\n'})}),"\n",(0,t.jsx)(n.h2,{id:"embedding-the-payment-session",children:"Embedding the Payment Session"}),"\n",(0,t.jsx)(n.p,{children:"Redirect the customer to the payment session url or embed the hosted payments page in an iframe:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<iframe\n    src="https://staging.bookiebase.ie/payment/[PAYMENT_SESSION_UUID]"\n></iframe>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Try it out: ",(0,t.jsx)(n.a,{href:"https://eg.gateway.bookiebase.ie/",children:"Gateway Embedding Example"})]}),"\n",(0,t.jsx)(n.h2,{id:"handle-session-result",children:"Handle Session Result"}),"\n",(0,t.jsxs)(n.p,{children:["If the session results in a successful payment, we will redirect the customer to the\nspecified ",(0,t.jsx)(n.code,{children:"success_redirect_url"}),". If the session is cancelled or fails, we will redirect the\ncustomer to the ",(0,t.jsx)(n.code,{children:"failure_redirect_url"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"webhooks",children:"Webhooks"}),"\n",(0,t.jsxs)(n.p,{children:["A webhook event will be sent to the configured ",(0,t.jsx)(n.code,{children:"webhook_url"})," each time the payment sessions\nstatus changes."]}),"\n",(0,t.jsxs)(n.p,{children:["Webhooks are sent as ",(0,t.jsx)(n.code,{children:"POST"})," requests to the specified ",(0,t.jsx)(n.code,{children:"webhook_url"}),". The body of the request"]}),"\n",(0,t.jsx)(n.p,{children:"Once decoded, the content of the webhook request will be as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "payment_session": {\n    "uuid": "611748d8-8d3a-4066-a72a-1fd24c72dff1",\n    "customer": { "account_id": "9999G", "currency": "GBP" },\n    "order_reference": "B4KFoQ2Ufk",\n    "payment_type": "DEPOSIT",\n    "amount_cents": 1000,\n    "payment": {\n        "status": "COMPLETE" # CREATED | COMPLETE | FAILED,\n    },\n  }\n}\n'})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.jsx)(a,{...e,children:(0,t.jsx)(d,{...e})})}function h(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}},e=>{var n=n=>e(e.s=n);e.O(0,[67456,85954,76731,90636,46593,38792],()=>n(64373)),_N_E=e.O()}]);